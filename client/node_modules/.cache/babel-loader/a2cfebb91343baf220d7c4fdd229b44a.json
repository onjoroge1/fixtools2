{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/kimnj/Downloads/fixtools/fixtools/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/kimnj/Downloads/fixtools/fixtools/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/kimnj/Downloads/fixtools/fixtools/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import HeaderNav from'../components/common/HeaderNav';import Footer from'../components/home/Footer';import{Button}from'react-bootstrap';import{useParams}from'react-router-dom';import{saveAs}from'file-saver';import data from'../db.json';import Spinner from'react-bootstrap/Spinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function DetailPdf(){var _useParams=useParams(),id=_useParams.id;var axios=require('axios');var _useState=useState(null),_useState2=_slicedToArray(_useState,2),cards=_useState2[0],setCards=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),pickFile=_useState4[0],setpickFile=_useState4[1];var _useState5=useState(\"/images/card-icon.png\"),_useState6=_slicedToArray(_useState5,2),selectedFile=_useState6[0],setSelectedFile=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),fileLoading=_useState8[0],setFileLoading=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),responseSave=_useState10[0],setResponseSave=_useState10[1];useEffect(function(){var filteredCards=data.cards.find(function(card){return card.id==id;});setCards(filteredCards);},[data.cards]);var handleChose=function handleChose(event){setFileLoading(true);var imgFile=event.target.files[0];var cardType=cards.type;setSelectedFile(event.target.files[0]);var formData=new FormData();formData.append('file',imgFile);if(cardType=='application/pdf'){fetch('http://localhost:8080/api/officetopdf',{method:'POST',body:formData}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){var resp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setFileLoading(false);console.log(res,'here is ressponse');if(!(res.status==200)){_context.next=10;break;}_context.next=5;return res.blob();case 5:resp=_context.sent;setResponseSave(resp);setpickFile(true);// saveAs(resp , `new${Date.now()}.docx`)\n_context.next=11;break;case 10:alert('Please choose file with pdf extension');case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}else{fetch('http://localhost:8080/api/fileUpload',{method:'POST',body:formData}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(res){var resp;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setFileLoading(false);if(!(res.status==200)){_context2.next=9;break;}_context2.next=4;return res.blob();case 4:resp=_context2.sent;setResponseSave(resp);setpickFile(true);_context2.next=10;break;case 9:alert('Please choose file with docx or doc extension');case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());}};var handleRemove=function handleRemove(){setpickFile(false);};if(!cards){return/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Loading\"})});}var downloadHandler=function downloadHandler(){console.log(selectedFile,'selectedFile');setpickFile(false);if(selectedFile.type==='application/vnd.openxmlformats-officedocument.wordprocessingml.document'||selectedFile.type==='application/msword'){saveAs(responseSave,\"new\".concat(Date.now(),\".pdf\"));}else if(selectedFile.type==='application/pdf'){saveAs(responseSave,\"new\".concat(Date.now(),\".docx\"));}else{alert('Your file not a right for convertable');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-hero\",children:[/*#__PURE__*/_jsx(HeaderNav,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-hero-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"detail-hero-content-heading\",children:/*#__PURE__*/_jsx(\"h1\",{children:cards.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"detail-hero-content-des\",children:/*#__PURE__*/_jsx(\"p\",{children:cards.desc})}),fileLoading?/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}):null,pickFile?/*#__PURE__*/_jsxs(\"div\",{className:\"detail-hero-content-butn\",children:[/*#__PURE__*/_jsx(\"p\",{children:selectedFile.name}),/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-outline-danger\",onClick:handleRemove,children:\"Remove\"}),/*#__PURE__*/_jsxs(Button,{onClick:function onClick(){return downloadHandler();},className:\"btn btn-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-download\"}),\" Download\"]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"detail-hero-content-nav\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"inputTag\",children:[\"CHOOSE FILE\",/*#__PURE__*/_jsx(\"input\",{disabled:fileLoading,id:\"inputTag\",type:\"file\",onChange:handleChose,className:\"detail-hero-content-nav-home-btn\"})]})})]})]}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"names":["useEffect","useState","HeaderNav","Footer","Button","useParams","saveAs","data","Spinner","DetailPdf","id","axios","require","cards","setCards","pickFile","setpickFile","selectedFile","setSelectedFile","fileLoading","setFileLoading","responseSave","setResponseSave","filteredCards","find","card","handleChose","event","imgFile","target","files","cardType","type","formData","FormData","append","fetch","method","body","then","res","console","log","status","blob","resp","alert","handleRemove","downloadHandler","Date","now","title","desc","name"],"sources":["C:/Users/kimnj/Downloads/fixtools/fixtools/client/src/Pages/DetailPdf.jsx"],"sourcesContent":["import {useEffect, useState} from 'react'\nimport HeaderNav from '../components/common/HeaderNav'\nimport Footer from '../components/home/Footer'\nimport { Button } from 'react-bootstrap'\nimport { useParams } from 'react-router-dom'\nimport {saveAs} from 'file-saver'\nimport data from '../db.json';\nimport Spinner from 'react-bootstrap/Spinner';\n\n\nexport default function DetailPdf() {\n    const {id} = useParams();\n    const axios = require('axios');\n\n    const [cards, setCards] = useState(null);\n    const [pickFile, setpickFile] = useState(false)\n    const [selectedFile, setSelectedFile] = useState(\"/images/card-icon.png\");\n    const [fileLoading, setFileLoading] = useState(false);\n    const [responseSave, setResponseSave] = useState('');\n\n\n    useEffect(() => {\n        const filteredCards = data.cards.find(card => card.id == id)\n        setCards(filteredCards)\n    },[data.cards])\n\n\n    const handleChose = (event) =>{\n        setFileLoading(true)\n        const imgFile = event.target.files[0];\n        const cardType = cards.type;\n        setSelectedFile(event.target.files[0]);\n\n\n        const formData = new FormData();\n        formData.append('file', imgFile);\n\n\n            if (cardType ==  'application/pdf') {\n                fetch('http://localhost:8080/api/officetopdf' , {\n                    method: 'POST',\n                    body:formData\n                })\n                    .then(async (res) =>{\n                        setFileLoading(false)\n                        console.log(res, 'here is ressponse')\n                        if(res.status == 200){\n                            const resp = await  res.blob();\n                            setResponseSave(resp)\n                            setpickFile(true)\n                            // saveAs(resp , `new${Date.now()}.docx`)\n                        }\n                        else {\n                            alert('Please choose file with pdf extension')\n                        }\n\n                    })\n            }\n            else {\n                    fetch('http://localhost:8080/api/fileUpload' , {\n                    method: 'POST',\n                    body:formData\n                })\n                    .then(async (res) =>{\n                        setFileLoading(false)\n                        if(res.status == 200){\n                            const resp = await  res.blob();\n                            setResponseSave(resp)\n                            setpickFile(true)\n                        }\n                        else {\n                            alert('Please choose file with docx or doc extension')\n                        }\n\n                    })\n\n            }\n\n\n\n\n\n\n        \n    }\n\n    \n\n    \n    const handleRemove = () =>{\n        setpickFile(false);\n    }\n\n    if (!cards) {\n        return<div className=\"loader\">\n            <h1>Loading</h1>\n        </div>\n         \n    }\n\n\n\n    const downloadHandler = () => {\n        console.log(selectedFile , 'selectedFile')\n        setpickFile(false);\n        if(selectedFile.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' || selectedFile.type === 'application/msword'){\n            saveAs(responseSave , `new${Date.now()}.pdf`)\n\n        }\n        else if(selectedFile.type === 'application/pdf' ){\n            saveAs(responseSave , `new${Date.now()}.docx`)\n        }\n        else{\n            alert('Your file not a right for convertable')\n        }\n    }\n\n  return (\n    \n    <div>\n\n        <div className=\"detail-hero\">\n            <HeaderNav />\n            <div className=\"detail-hero-content\">\n                    <div className=\"detail-hero-content-heading\">\n                        <h1>{cards.title}</h1>\n                    </div>\n                    <div className=\"detail-hero-content-des\">\n                        <p>{cards.desc}</p>\n                    </div>\n                {\n                    fileLoading ?\n                        <Spinner animation=\"border\" role=\"status\">\n                            <span className=\"visually-hidden\">Loading...</span>\n                        </Spinner>\n                        : null\n                }\n\n\n\n                {\n                        pickFile ?(\n                            \n                            \n                            <div className=\"detail-hero-content-butn\">\n                                <p>{selectedFile.name}</p>\n                                <a className='btn btn-outline-danger' onClick={handleRemove}>Remove</a>\n\n                                <Button onClick={() => downloadHandler()} className='btn btn-primary'><i className=\"fa fa-download\"></i> Download</Button>\n                            </div>\n\n                        ):\n                        (\n                        <div className=\"detail-hero-content-nav\">\n                            <label htmlFor=\"inputTag\">\n                                CHOOSE FILE\n                                <input disabled={fileLoading} id=\"inputTag\" type=\"file\"  onChange={handleChose}  className=\"detail-hero-content-nav-home-btn\"/>\n                            </label>\n                        </div> \n\n                        )\n\n                    }\n\n             </div>\n        </div>\n        \n        <Footer />\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}